---
title: "ã‚³ãƒŸãƒƒãƒˆã«å¯¾ã™ã‚‹SSHç½²åã«GitHubãŒå¯¾å¿œã—ãŸãã†ãªã®ã§è¨­å®šã—ã¦ã¿ãŸ"
emoji: "ğŸ“˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["GitHub", "Git", "SSH"]
published: true
---

# ã¯ã˜ã‚ã«
â€»Qiitaã§æ›¸ã„ãŸã‚‚ã®ã‚’ç§»è¡Œã—ã¦ããŸè¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚

å…ˆæ—¥å‚åŠ ã—ãŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ£ãƒ³ãƒ—å…¨å›½å¤§ä¼šã§[sigstore](https://www.sigstore.dev/)ã®ç´¹ä»‹ãŒã‚ã‚Šã€gitã®commitã«å¯¾ã—ã¦ç½²åã‚’è¡Œã„ã¾ã—ãŸã€‚ãŸã ã€é–‹ç™ºä¸­ã¨ã„ã†ã“ã¨ã‚‚ã‚ã£ã¦ã‹åƒ•ã®ç’°å¢ƒã§ã¯ã†ã¾ãã„ã‹ãšã€ã‹ã¨ã„ã£ã¦GPGéµã‚’æ–°ã—ãä½œã‚‹ã¨éµç®¡ç†ãŒé¢å€’ã§æ”¾ç½®ã—ã¦ã„ã¾ã—ãŸã€‚ãã‚“ãªä¸­Twitterã‚’å¾˜å¾Šã—ã¦ã„ãŸã‚‰GitHubãŒSSHç½²åã«å¯¾å¿œã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã“ã¨ã‚’çŸ¥ã£ãŸã®ã§æ—©é€Ÿè©¦ã—ã¦ã¿ã¾ã—ãŸï¼ï¼

https://github.blog/changelog/2022-08-23-ssh-commit-verification-now-supported/

https://twitter.com/reimei_dev/status/1562313372330512385

# æº–å‚™
macã ã¨xcodeçµŒç”±ã§gitã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚Šã€ãã®å ´åˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®é–¢ä¿‚ã§SSHã§ç½²åã§ããªã„ã“ã¨ãŒã‚ã‚‹ã®ã§ã€brewçµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãã¾ã™ã€‚
```
$ git --version
git version 2.32.1 (Apple Git-133)
```
â–¼ brewçµŒç”±ã§gitã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
$ brew update
$ brew install git
$ echo 'export PATH=/usr/local/bin:$PATH' >> ~/.zshrc
$ source ~/.zshrc
$ git --version
git version 2.37.2
```

â–¼ ç½²åã‚’ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«[SSHéµã®ç™»éŒ²ãƒšãƒ¼ã‚¸](https://github.com/settings/ssh/new)ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€éµã®åå‰ã€Key typeã« `Signing Key`ã€å…¬é–‹éµã‚’è¨­å®š
![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2022-08-24 22.08.25.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/680126/a31f188b-c113-21a8-b67f-636632b02515.png)



# è¨­å®š
â–¼ ç½²åã«ä½¿ç”¨ã™ã‚‹éµã‚’ç®¡ç†
ãƒ•ã‚¡ã‚¤ãƒ«åã‚„å ´æ‰€ã¯ã©ã“ã§ã‚‚ã„ã„ã®ã§ã™ãŒã€ä»Šå›ã¯ `~/.config/git/allowed_signers` ã«ä½œã‚Šã¾ã™
```
# ~/.config/git/allowed_signers
# ã‚³ãƒŸãƒƒãƒˆã§ä½¿ç”¨ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ å…¬é–‹éµã®ä¸­èº«
# â†“ ä¾‹)
hoge@example.local ssh-ed25519 AAAA.........
```
â–¼ æ®‹ã‚Šã®è¨­å®šç­‰
```
$ ssh-add ~/.ssh/id_rsa
$ git config --global gpg.format ssh
$ git config --global user.signingKey 'å…¬é–‹éµã®ä¸­èº«'
$ git config --global gpg.ssh.allowedSignersFile "$HOME/.config/git/allowed_signers"

# ã‚³ãƒŸãƒƒãƒˆã™ã‚‹éš›ã«è‡ªå‹•ã§ç½²åã‚’è¡Œã†ãŸã‚ã®è¨­å®š
$ git config --global commit.gpgsign true

# ãƒ†ã‚¹ãƒˆç”¨ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã‚³ãƒŸãƒƒãƒˆ&ãƒ—ãƒƒã‚·ãƒ¥
$ git commit -am "signature test"
$ git push
```

# çµæœ
ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒŸãƒƒãƒˆä¸€è¦§ã‚’è¦‹ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã« `Verified` ã®æ–‡å­—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚
![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2022-08-24 22.07.28.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/680126/a6099cdb-b2ea-9761-86d1-44f7611da209.png)


# å‚è€ƒURL
http://calebhearth.com/sign-git-with-ssh

https://blog.dbrgn.ch/2021/11/16/git-ssh-signatures/

